bioguide: SWAU31221_666893
contact_form:
  driver: phantom
  steps:
    - visit: "https://app.leg.wa.gov/pbc/memberEmail/25/0"
    - fill_in:
        - name: street
          selector: "#Address_Street"
          value: $ADDRESS_STREET
          required: true
        - name: city
          selector: "#Address_City"
          value: $ADDRESS_CITY
          required: true
        - name: zipcode
          selector: "#Address_Zip"
          value: $ADDRESS_ZIP5
          required: true
    - click_on:
        - value: Validate address
          selector: "#ValidateAddressButton"
    - fill_in:
        - name: First Name
          selector: "#FirstName"
          value: $NAME_FIRST
          required: true
        - name: Last Name
          selector: "#LastName"
          value: $NAME_LAST
          required: true
        - name: email
          selector: "#Email"
          value: $EMAIL
          required: true
        - name: confirmemailaddress
          selector: "#ConfirmEmail"
          value: $EMAIL
          required: true
        - name: phone
          selector: "#PhoneNumber"
          value: $PHONE
          required: false
        - name: subject
          selector: "#CommentSubject"
          value: $SUBJECT
          required: true
          options: 
            max_length: 100
        - name: message
          selector: "#Comment"
          value: $MESSAGE
          required: true
          options: 
            max_length: 1000
    - javascript:
        - name: phone
          selectors: [ "#PhoneNumber"]
          values: [ "$PHONE" ]
          commands: [ "elements[0].value = values[0].replace(/\\D/g,'').length > 10 ? values[0].replace(/\\D/g,'').substr(1) : values[0].replace(/\\D/g,'')" ]
    - find:
        - value: "#ResponseRequested_True"
    - click_on:
        - value: Response requested
          selector: "#ResponseRequested_True"
    - wait:
      - value: 2
    - click_on:
        - value: Send
          selector: "#FormSubmitButton"
  success:
    body:
      contains: The following message was sent to