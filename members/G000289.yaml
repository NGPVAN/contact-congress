bioguide: G000289
contact_form:
  method: POST
  action: "http://goodlatte.house.gov/submit-contact-iq.aspx"
  steps:
    - visit: "https://goodlatte.house.gov/contact/"
    - find:
      - selector: form.zipform input[name='zip5']
    - fill_in:
      - name: zip5
        selector: form.zipform input[name='zip5']
        value: $ADDRESS_ZIP5
        required: true
      - name: zip4
        selector: form.zipform input[name='zip4']
        value: $ADDRESS_ZIP4
        required: true
    - find:
      - selector: form.zipform input[value='Submit']
    - click_on:
      - selector: form.zipform input[value='Submit']
    - find:
      - selector: form#contact input[name='required-first']
    - fill_in:
      - name: first
        selector: form#contact input[name='required-first']
        value: $NAME_FIRST
        required: true
      - name: last
        selector: form#contact input[name='required-last']
        value: $NAME_LAST
        required: true
      - name: street
        selector: form#contact input[name='required-address']
        value: $ADDRESS_STREET
        required: true
      - name: city
        selector: form#contact input[name='required-city']
        value: $ADDRESS_CITY
        required: true
      - name: zip5
        selector: form#contact input[name='zip5']
        value: $ADDRESS_ZIP5
        required: true
      - name: zip4
        selector: form#contact input[name='zip4']
        value: $ADDRESS_ZIP4
        required: true
      - name: email
        selector: form#contact input[name='required-email']
        value: $EMAIL
        required: true
      - name: phone
        selector: form#contact input[name='phone']
        value: $PHONE
        required: false
      - name: subject
        selector: form#contact input[name='required-subject']
        value: $SUBJECT
        required: true
      - name: message
        selector: form#contact textarea[name='required-message']
        value: $MESSAGE
        required: true
    - select:
      - name: prefix
        selector: form#contact select[name='required-prefix']
        value: $NAME_PREFIX
        required: true
        options:
          Mr.: Mr.
          Mrs.: Mrs.
          Ms.: Ms.
          Dr.: Dr.
          Rev.: Rev.
          Other: Other
    - find:
      - selector: form#contact input[value='Send Email']
    - click_on:
      - selector: form#contact input[value='Send Email']
    - wait:
      - value: 1
  success:
    headers:
      status: 200
    body:
      contains: "Your form has been successfully submitted"
